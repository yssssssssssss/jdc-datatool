# 多库可视化功能使用说明

## 📋 功能概述

本系统集成了 **Apache ECharts** 和 **Bokeh** 两个强大的可视化库，用户可以根据需求选择不同的渲染引擎来生成图表，并进行性能对比。

## 🚀 如何使用多库可视化功能

### 1. 访问多库可视化页面

1. 启动应用后，访问：http://localhost:8504
2. 在左侧导航栏中点击 **"📈 可视化生成"**
3. 进入多库可视化生成页面

### 2. 多库选择的三种模式

#### 🎯 模式一：单库模式

**位置**：可视化生成页面 → "单库模式" 标签页

**操作步骤**：
1. **选择可视化库**：
   - 从下拉菜单中选择 "echarts" 或 "bokeh"
   - 系统会自动加载对应库的支持图表类型

2. **选择图表类型**：
   - ECharts支持：line, bar, scatter, pie, funnel, radar, gauge
   - Bokeh支持：line, bar, scatter, heatmap, histogram, box, area

3. **配置数据列**：
   - 选择X轴数据列
   - 选择Y轴数据列

4. **生成图表**：
   - 点击 "生成图表" 按钮
   - 系统会显示图表和性能指标

#### 🔄 模式二：对比模式

**位置**：可视化生成页面 → "对比模式" 标签页

**操作步骤**：
1. **选择对比库**：
   - 同时选择两个不同的可视化库进行对比
   - 例如：库1选择"echarts"，库2选择"bokeh"

2. **配置图表参数**：
   - 选择相同的图表类型（如都选择"line"）
   - 选择相同的数据列进行公平对比

3. **生成对比图表**：
   - 点击 "生成对比图表" 按钮
   - 系统会并排显示两个库生成的图表
   - 同时显示详细的性能对比数据

#### 📊 模式三：性能监控

**位置**：可视化生成页面 → "性能监控" 标签页

**功能**：
- 查看历史图表生成的性能数据
- 对比不同库的渲染速度
- 分析文件大小和内存使用情况

## 🔧 API接口说明

### 获取可用适配器
```http
GET /api/multi_lib/adapters
```

### 获取图表类型
```http
GET /api/multi_lib/chart_types?adapter=echarts
```

### 生成图表
```http
POST /api/multi_lib/generate_chart
Content-Type: application/json

{
    "adapter_name": "echarts",
    "chart_type": "line",
    "data": {
        "x": [1, 2, 3, 4, 5],
        "y": [2, 4, 6, 8, 10]
    },
    "config": {
        "title": "示例图表",
        "width": 800,
        "height": 600
    }
}
```

## 📈 性能对比功能

### 对比指标

1. **渲染时间**：图表生成所需的时间（秒）
2. **文件大小**：生成图表的文件大小（KB）
3. **内存使用**：渲染过程中的内存占用
4. **图表质量**：视觉效果和交互性评估

### 智能推荐

系统会根据以下因素自动推荐最适合的可视化库：
- 数据量大小
- 图表复杂度
- 性能要求
- 交互需求

## 🎨 支持的图表类型对比

| 图表类型 | ECharts | Bokeh | 推荐场景 |
|---------|---------|-------|----------|
| 折线图 (line) | ✅ | ✅ | 时间序列数据 |
| 柱状图 (bar) | ✅ | ✅ | 分类数据对比 |
| 散点图 (scatter) | ✅ | ✅ | 相关性分析 |
| 饼图 (pie) | ✅ | ❌ | 占比展示 |
| 漏斗图 (funnel) | ✅ | ❌ | 转化率分析 |
| 雷达图 (radar) | ✅ | ❌ | 多维度对比 |
| 仪表盘 (gauge) | ✅ | ❌ | KPI展示 |
| 热力图 (heatmap) | ❌ | ✅ | 矩阵数据 |
| 直方图 (histogram) | ❌ | ✅ | 分布分析 |
| 箱线图 (box) | ❌ | ✅ | 统计分析 |
| 面积图 (area) | ❌ | ✅ | 累积数据 |

## 🔍 故障排除

### 常见问题

1. **图表不显示**
   - 检查数据格式是否正确
   - 确认选择的图表类型与数据兼容
   - 查看浏览器控制台错误信息

2. **性能较慢**
   - 减少数据点数量
   - 选择更适合的图表类型
   - 考虑使用性能更好的可视化库

3. **API调用失败**
   - 确认后端服务正在运行（端口7701）
   - 检查网络连接
   - 验证请求参数格式

### 技术支持

如遇到问题，请检查：
1. 后端服务状态：http://localhost:7701
2. 前端应用状态：http://localhost:8504
3. 浏览器控制台日志
4. 服务器日志输出

## 🎯 最佳实践

1. **选择合适的库**：
   - 数据量大时优先选择性能更好的库
   - 需要复杂交互时选择功能更丰富的库

2. **优化性能**：
   - 合理控制数据点数量
   - 选择适当的图表尺寸
   - 避免过于复杂的样式配置

3. **用户体验**：
   - 使用对比模式验证最佳选择
   - 关注性能监控数据
   - 根据实际需求调整配置

---

**注意**：确保在使用前已正确安装所有依赖包，并启动了后端服务。